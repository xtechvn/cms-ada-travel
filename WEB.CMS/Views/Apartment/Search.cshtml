@{
    Layout = null;
}
@using Utilities.Contants
@using Entities.ViewModels.Invoice;
@using Entities.ViewModels
@using Entities.Models
@model GenericViewModel<OrderViewModel>
@{
    var Total = (TotalValueOrder)ViewBag.FilterOrder.TotalValueOrder;
    var TotalRecord = (int)ViewBag.FilterOrder.Totalrecord;
    var TotalRecord1 = (int)ViewBag.FilterOrder.Totalrecord1;
    var TotalRecord2 = (int)ViewBag.FilterOrder.Totalrecord2;
    var TotalRecord3 = (int)ViewBag.FilterOrder.Totalrecord3;
    var TotalRecord4 = (int)ViewBag.FilterOrder.Totalrecord4;
    var TotalRecordErr = (int)ViewBag.FilterOrder.TotalrecordErr;
    var TotalData = (int)ViewBag.FilterOrder.TotalData;
    List<InvoiceRequestViewModel> invoiceList = (List<InvoiceRequestViewModel>)ViewBag.Invoice;
}
<div class="tab-default" style="border-bottom: 1px solid #CCCCCC;">
    <div class="row" style=" width: 100%; ">
        <input id="countOrder" value="@TotalRecord" style="display:none" />
        <div class="tab-default col-md-9 mb0 mt10">
            <a href="javascript:;" onclick="_ordersCMS.OnSearchStatus(99)" id="countSttAll" class="active">Tất cả đơn hàng (@TotalRecord)</a>
            <a href="javascript:;" onclick="_ordersCMS.OnSearchStatus(1)" id="countSttCheck">Đang tư vấn (@TotalRecord1)</a>
            <a href="javascript:;" onclick="_ordersCMS.OnSearchStatus(2)" id="countSttNotDone">Chưa khởi hành (@TotalRecord2)</a>
            <a href="javascript:;" onclick="_ordersCMS.OnSearchStatus(3)" id="countSttDone">Đã khởi hành (@TotalRecord3)</a>
            <a href="javascript:;" onclick="_ordersCMS.OnSearchStatus(4)" id="countSttErr">Đơn hàng lỗi (@TotalRecordErr)</a>
            <a href="javascript:;" onclick="_ordersCMS.OnSearchStatus(0)" id="countSttNews">Đơn chờ nhận triển khai (@TotalRecord4)</a>
        </div>
        <div class="col-md-3 text-right mt10">
            <button type="submit" class="btn btn-default" onclick="_order_manual.CreateOrderManual()">Tạo đơn hàng</button>
        </div>
    </div>
</div>

<div class="line-bottom mb20">
    <div class="flex">
        <div class="mb10 mr-4">Tổng giá trị: <strong>@Total.TotalAmmount</strong></div>
        <div class="mb10 mr-4">Đã thanh toán: <strong>@Total.TotalProductService</strong></div>
        <div class="mb10 mr-4">Chưa thanh toán: <strong>@((Convert.ToDouble(Total.TotalAmmount) - Convert.ToDouble(Total.TotalProductService)).ToString("N0"))</strong></div>
        <div id="totalProfit" class="mb10 mr-4 hide-element">Lợi nhuận: <strong>@Total.TotalProfit</strong></div>
    </div>
</div>

<div class="table-responsive table-default table-gray wrap_bg wrap_bg_no-padding">
    <table class="table table-nowrap">
        <thead>
            <tr>
                <th>STT</th>
                <th>Mã đơn</th>
                <th>Tên căn hộ</th>
                <th>Địa chỉ</th>
                <th>Ngày tạo</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.ListData != null && Model.ListData.Count > 0)
            {
                var counter = (Model.CurrentPage - 1) * Model.PageSize;
                foreach (var item in Model.ListData)
                {
                    counter++;
                    <tr>
                        <td class="center">@counter</td>

                        <td>
                            <a class="blue" href="/Apartment/@item.OrderId" onclick="_ordersCMS.saveCookieFilter()">
                                @item.OrderCode
                            </a>
                        </td>

                        <td>
                            <div class="blue">@item.HotelName</div>
                        </td>

                        <td style="width:20%;">
                            @item.Street
                        </td>

                        <td>@item.CreateDate</td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>

<style>
    .status-bold-green {
        font-size: 12px;
        background: #009933;
        color: #fff;
        padding: 2px 10px;
        border-radius: 5px
    }
</style>

@await Component.InvokeAsync("PagingNew", new
    {
        pageModel = new Paging()
    {
        TotalRecord = TotalData,
        TotalPage = Model.TotalPage,
        CurrentPage = Model.CurrentPage,
        PageSize = Model.PageSize,
        RecordName = "hợp đồng",
        PageAction = "_ordersCMS.OnPaging({0})",
        PageSelectPageSize = "_ordersCMS.onSelectPageSize()"
    }
    })
