@using Entities.Models
@{
    var tour_types = (List<AllCode>)ViewBag.TourTypes;
    int flashsale_id = (int)ViewBag.FlashSaleId;
    Layout = null;
}

<style>
    /* ===== FIX UI SELECT LOẠI TOUR ===== */
    #add-flashsale .search-wrapper select,
    #add-flashsale .search-wrapper .select2-container--default .select2-selection--single {
        height: 38px;
        border-radius: 6px;
        border: 1px solid #ced4da;
        font-size: 14px;
    }

    /* Select2 hiển thị giống input */
    #add-flashsale .select2-container--default .select2-selection--single {
        display: flex;
        align-items: center;
        padding: 4px 10px;
    }

    /* Text trong select */
    #add-flashsale .select2-selection__rendered {
        line-height: 28px !important;
        padding-left: 0 !important;
        color: #495057;
    }

    /* Icon mũi tên */
    #add-flashsale .select2-selection__arrow {
        height: 100%;
        right: 6px;
    }

    /* Khi focus */
    #add-flashsale .select2-container--default.select2-container--focus
    .select2-selection--single {
        border-color: #3b82f6;
        box-shadow: 0 0 0 0.1rem rgba(59,130,246,.25);
    }

    /* Khoảng cách label – input đồng đều */
    #add-flashsale label {
        font-weight: 500;
        font-size: 13px;
        color: #374151;
    }

    /* Mobile gọn hơn */
    @@media (max-width: 768px) {
        #add-flashsale .select2-container

    {
        width: 100% !important;
    }

    }
</style>

<div class="modal fade" id="add-flashsale"
     style="display:none; background-color: rgba(0,0,0,0.5);"
     aria-hidden="true"
     data-id="@flashsale_id">

    <div class="modal-dialog" style="max-width: 860px;">
        <div class="modal-content">
            <div class="content_lightbox">
                <h6 class="text-uppercase mb-3">Chọn tour</h6>

                <div class="row">
                    <!-- Search name/code -->
                    <div class="col-md-6">
                        <div class="row">
                            <label class="col-sm-3 col-4">Tên / Mã tour</label>
                            <div class="col-sm-9 col-8">
                                <div class="form-group w-100">
                                    <div class="search-wrapper">
                                        <input id="add-flashsale-search-name"
                                               type="text"
                                               class="input_search onclick-togle border"
                                               placeholder="Tìm theo mã tour, tên tour">
                                        <span class="search-btn">
                                            <button type="button" id="btn-search-tour">
                                                <svg class="icon-svg">
                                                    <use xlink:href="#search"></use>
                                                </svg>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="row">
                            <label class="col-sm-3 col-4">Loại tour</label>
                            <div class="col-sm-9 col-8">
                                <div class="form-group w-100 ">
                                    @* <div class="search-wrapper"> *@
                                    <select id="add-flashsale-search-display" class="select2 w-100" style="width:100% !important; height: 34px;">
                                            <option value="-1">Tất cả</option>
                                            @if (tour_types != null && tour_types.Any())
                                            {
                                                foreach (var item in tour_types)
                                                {
                                                    <option value="@item.CodeValue">@item.Description</option>
                                                }
                                            }
                                        </select>
                                    @* </div> *@
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex gap10 justify-content-between align-items-center mt-2" style="
    display: contents;
    text-align: right;
">
                    <div class="action">
                        <a href="javascript:;" id="add-flashsale-search-confirm" class="btn btn-round btn-outline-base">Tìm</a>
                        <a href="javascript:;" id="add-flashsale-search-clear" class="btn btn-round btn-base">Nhập lại</a>
                    </div>
                </div>

                <!-- ===== SCROLL WRAPPER (đây là chỗ fix) ===== -->
                <div class="table-responsive table-default mt-3 flashsale-tour-scroll">
                    <table class="table text-center table-nowrap w-100">
                        <thead>
                            <tr class="thead">
                                <td style="width:40px;">
                                    <label class="check-list mb20 check-list-all">
                                        <input type="checkbox" id="check-all-tour">
                                        <span class="checkmark"></span>
                                    </label>
                                </td>
                                <td class="text-left">Tour</td>
                                <td style="width:120px;">Giá</td>
                            </tr>
                        </thead>
                        <tbody id="flashsale-tour-tbody">
                            @* ajax will fill *@
                        </tbody>
                    </table>
                </div>

                <div class="action fs-footer">
                    <a href="javascript:;" id="add-flashsale-btn-cancel" class="btn btn-round btn-outline-base">Hủy</a>
                    <a href="javascript:;" id="add-flashsale-btn-confirm" class="btn btn-round btn-base">Xác nhận</a>
                </div>

            </div>

            <button title="Close (Esc)" type="button" class="mfp-close" data-dismiss="modal">×</button>
        </div>
    </div>
</div>
